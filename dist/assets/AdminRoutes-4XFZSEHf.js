import{r as t,T as He,b as De,a as ke,j as e,h as Ve,o as We,V as q,s as Je,e as Ee,N as pe,i as Ke,S as Ge,R as Xe,f as I}from"./index-C7mejEug.js";import{c as Ne,a0 as Ze,B as F,b as Qe,M as es,S as ss,H as ts,G as we,Q as G,g as as,e as rs,f as ns,P as ve,i as ls,k as cs,l as is,a as ye,I as A,D as B,p as Y,q as H,r as V,J as K,K as W,o as ce,ai as Se,aj as ze,ah as ds,E as os,n as xs,s as hs,L as ms}from"./validation-B4MekqSY.js";import{B as gs,D as Le,b as Fe,c as Me,e as us,d as ue,S as js,U as ps,L as Pe,ad as ys,ae as bs,v as fs,W as Re,o as be,$ as ks,a0 as Ns,a1 as ws,a2 as vs,a3 as Cs,a4 as Ss,a5 as zs,a6 as je,a9 as D,ac as u,a7 as X,a8 as Z,aa as w,ab as Q,h as de,T as oe,i as xe,j as he,k as me,w as ee,x as se,y as E,z as te,E as ae,H as re,a as Ls,af as Fs,ag as Ms,ah as Ds,ai as Es,f as Ps,aj as Rs,ak as As,al as Is,am as Ts,m as _s,N as qs}from"./LineChart-BbdiGJvh.js";import{F as Os,B as $s}from"./file-text-Wi68siwF.js";import{e as Us,t as Bs,g as Ys,a as Hs,H as Vs,b as Ws}from"./escrowApi-BAaftEYO.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ks=Ne("LayoutDashboard",Js);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"m8 11 2 2 4-4",key:"1sed1v"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Xs=Ne("SearchCheck",Gs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],Qs=Ne("UserCog",Zs),Ae=async()=>{var s;try{return(await Ze.get("/api/client/contract/all-contracts")).data}catch(a){throw((s=a.response)==null?void 0:s.data)||"Failed to get all contracts"}},O=({toggleSidebar:s})=>{const[a,r]=t.useState([]),[x,d]=t.useState(!1),[o,m]=t.useState(!1),y=t.useContext(He);if(!y)return null;const{theme:N,toggleTheme:C}=y,j=De(),k=ke();t.useEffect(()=>{(async()=>{try{const l=(await Ae()).data.filter(v=>v.releaseFundStatus==="Requested");r(l),m(l.length>0)}catch(i){console.error("Error fetching contracts:",i)}})()},[]);const p=f=>{k(`/admin/contracts/${f}`)},g=async()=>{try{await ts(),j(Ve()),k("/admin/login")}catch(f){console.error("Logout failed:",f)}};return e.jsx("nav",{className:"bg-gray-200 dark:bg-black border-b border-zinc-200 dark:border-zinc-800 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{variant:"ghost",size:"icon",className:"md:hidden text-gray-500 dark:text-gray-400 hover:text-emerald-500 dark:hover:text-emerald-400",onClick:s,children:e.jsx(Qe,{size:20})}),e.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[e.jsx(F,{variant:"ghost",onClick:C,children:N==="light"?e.jsx(es,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}):e.jsx(ss,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{className:"relative",children:[e.jsxs(F,{variant:"ghost",size:"icon",className:"text-gray-500 dark:text-gray-400 hover:text-emerald-500 dark:hover:text-emerald-400",onClick:()=>d(f=>!f),children:[e.jsx(gs,{size:20}),o&&e.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full"})]}),x&&e.jsxs(Le,{open:x,onOpenChange:d,children:[e.jsx(Fe,{asChild:!0,children:e.jsx("span",{})}),e.jsxs(Me,{align:"end",className:"w-80 max-h-72 overflow-y-auto bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-md z-50",sideOffset:10,side:"bottom",forceMount:!0,children:[a.length>0&&e.jsx(us,{className:"p-3 text-sm font-medium border-b border-zinc-200 dark:border-zinc-800",children:"Fund Release Requests"}),a.length>0?a.map(f=>{var i,l;return e.jsxs(ue,{onClick:()=>p(f._id),className:"flex flex-col items-start p-3 text-left hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer border-b border-zinc-100 dark:border-zinc-800",children:[e.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:["Contract ID: ",f.contractId]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Client ",e.jsx("span",{className:"font-medium",children:(i=f.clientId)==null?void 0:i.name})," has requested to release funds."]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Freelancer: ",(l=f.freelancerId)==null?void 0:l.name]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Requested at: ",new Date(f.updatedAt).toLocaleDateString()]})]},f._id)}):e.jsx(ue,{className:"p-3 text-gray-500 dark:text-gray-400 text-sm",children:"No notifications yet."})]})]})]}),e.jsx(F,{variant:"ghost",size:"icon",className:"text-gray-500 dark:text-gray-400 hover:text-emerald-500 dark:hover:text-emerald-400",children:e.jsx(js,{size:20})}),e.jsxs(Le,{children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(F,{variant:"ghost",className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-emerald-500 dark:hover:text-emerald-400",children:[e.jsx(ps,{size:20}),e.jsx("span",{className:"hidden md:inline",children:"Admin"})]})}),e.jsx(Me,{className:"bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800",children:e.jsxs(ue,{onClick:g,className:"text-red-500 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer",children:[e.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Logout"]})})]})]})]})})},T=({to:s,icon:a,label:r,className:x="",isCollapsed:d})=>e.jsxs(We,{to:s,className:({isActive:o})=>`flex items-center ${d?"justify-center":"gap-3"} 
                p-3 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-zinc-800 hover:text-emerald-500 dark:hover:text-emerald-400 
                rounded-md transition-all duration-200 group ${x} 
                ${o?"bg-gray-300 dark:bg-zinc-800 text-emerald-500 dark:text-emerald-400":""}`,children:[a,!d&&e.jsx("span",{className:"text-sm font-medium",children:r}),d&&e.jsx("div",{className:`absolute left-full ml-2 px-2 py-1 bg-gray-100 dark:bg-zinc-800 
                    text-gray-900 dark:text-white text-sm rounded opacity-0 group-hover:opacity-100 
                    transition-opacity whitespace-nowrap z-50`,children:r})]}),$=({isCollapsed:s,toggleSidebar:a,isMobile:r})=>e.jsxs("aside",{className:`${s?"w-20":"w-64"} 
            bg-gray-200 dark:bg-black border-r border-zinc-200 dark:border-zinc-800 transition-all duration-300 
            fixed md:relative h-screen z-20`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:"S"})}),!s&&e.jsx("span",{className:"font-bold text-[#111111] dark:bg-gradient-to-r dark:from-emerald-400 dark:to-cyan-400 dark:bg-clip-text dark:text-transparent",children:"SKILLORA"})]}),!r&&e.jsx(F,{variant:"ghost",size:"icon",onClick:a,className:"text-gray-500 dark:text-gray-400 hover:text-emerald-500 dark:hover:text-emerald-400",children:s?e.jsx(ys,{size:20}):e.jsx(bs,{size:20})})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx(T,{to:"/admin/dashboard",icon:e.jsx(Ks,{size:20}),label:"Dashboard",isCollapsed:s}),e.jsx(T,{to:"/admin/clients",icon:e.jsx(fs,{size:20}),label:"Clients",isCollapsed:s}),e.jsx(T,{to:"/admin/freelancers",icon:e.jsx(Qs,{size:20}),label:"Freelancers",isCollapsed:s}),e.jsx(T,{to:"/admin/contracts",icon:e.jsx(Os,{size:20}),label:"Contracts",isCollapsed:s}),e.jsx(T,{to:"/admin/payments",icon:e.jsx(Re,{size:20}),label:"Payments",isCollapsed:s}),e.jsx(T,{to:"/admin/job-categories",icon:e.jsx($s,{size:20}),label:"Job Categories",isCollapsed:s}),e.jsx(T,{to:"/admin/skills",icon:e.jsx(Xs,{size:20}),label:"Skills",isCollapsed:s}),e.jsx(T,{to:"/logout",icon:e.jsx(Pe,{size:20}),label:"Logout",className:"text-red-500 dark:text-red-400 hover:bg-red-500/10 dark:hover:bg-red-400/10 hover:text-red-500 dark:hover:text-red-300 mt-8",isCollapsed:s})]})]}),U=(s=768)=>{const[a,r]=t.useState(window.innerWidth<=s);return t.useEffect(()=>{const x=()=>{r(window.innerWidth<=s)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[s]),a};function et(s){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M327.027 65.816L229.79 128.23l9.856 5.397 86.51-55.53 146.735 83.116-84.165 54.023 4.1 2.244v6.848l65.923-42.316 13.836 7.838-79.76 51.195v11.723l64.633-41.487 15.127 8.57-79.76 51.195v11.723l64.633-41.487 15.127 8.57-79.76 51.195v11.723l100.033-64.21-24.828-14.062 24.827-15.937-24.828-14.064 24.827-15.937-23.537-13.333 23.842-15.305-166.135-94.106zm31.067 44.74c-21.038 10.556-49.06 12.342-68.79 4.383l-38.57 24.757 126.903 69.47 36.582-23.48c-14.41-11.376-13.21-28.35 2.942-41.67l-59.068-33.46zM227.504 147.5l-70.688 46.094 135.61 78.066 1.33-.85c2.5-1.61 6.03-3.89 10.242-6.613 8.42-5.443 19.563-12.66 30.674-19.86 16.002-10.37 24.248-15.72 31.916-20.694L227.504 147.5zm115.467 1.17a8.583 14.437 82.068 0 1 .003 0 8.583 14.437 82.068 0 1 8.32 1.945 8.583 14.437 82.068 0 1-.87 12.282 8.583 14.437 82.068 0 1-20.273 1.29 8.583 14.437 82.068 0 1 .87-12.28 8.583 14.437 82.068 0 1 11.95-3.237zm-218.423 47.115L19.143 263.44l23.537 13.333-23.842 15.305 24.828 14.063-24.828 15.938 24.828 14.063-24.828 15.938 166.135 94.106L285.277 381.8V370.08l-99.433 63.824L39.11 350.787l14.255-9.15 131.608 74.547L285.277 351.8V340.08l-99.433 63.824L39.11 320.787l14.255-9.15 131.608 74.547L285.277 321.8V310.08l-99.433 63.824L39.11 290.787l13.27-8.52 132.9 75.28 99.997-64.188v-5.05l-5.48-3.154-93.65 60.11-146.73-83.116 94.76-60.824-9.63-5.543zm20.46 11.78l-46.92 30.115c14.41 11.374 13.21 28.348-2.942 41.67l59.068 33.46c21.037-10.557 49.057-12.342 68.787-4.384l45.965-29.504-123.96-71.358zm229.817 32.19c-8.044 5.217-15.138 9.822-30.363 19.688-11.112 7.203-22.258 14.42-30.69 19.873-4.217 2.725-7.755 5.01-10.278 6.632-.09.06-.127.08-.215.137v85.924l71.547-48.088v-84.166zm-200.99 17.48a8.583 14.437 82.068 0 1 8.32 1.947 8.583 14.437 82.068 0 1-.87 12.28 8.583 14.437 82.068 0 1-20.27 1.29 8.583 14.437 82.068 0 1 .87-12.28 8.583 14.437 82.068 0 1 11.95-3.236z"},child:[]}]})(s)}function st(s){return we({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(s)}function tt(s){return we({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M3,6 L21,6 L3,6 Z M10,2 L10,4 M14,2 L14,4 M16,12 C18.3736719,13.1826446 20,15.6506255 20,19 L20,23 L4,23 L4,19 C4,15.6457258 5.6310898,13.1754259 8,12 M12,16.5 L12,23 M12,13 C15.3137085,13 18,10.3137085 18,7 C18,3.6862915 15.3137085,1 12,1 C8.6862915,1 6,3.6862915 6,7 C6,10.3137085 8.6862915,13 12,13 Z M8,12 C8,14.209139 9.790861,16 12,16 L12,16 C14.209139,16 16,14.209139 16,12"},child:[]}]})(s)}const Ie=async()=>{var s;try{return(await G.get("/api/admin/users/get-clients")).data}catch(a){throw((s=a.response)==null?void 0:s.data)||"Failed to get clients"}},Te=async()=>{var s;try{return(await G.get("/api/admin/users/get-freelancers")).data}catch(a){throw((s=a.response)==null?void 0:s.data)||"Failed to get freelancers"}},at=async s=>{var a;try{return(await G.put(`/api/admin/users/block-freelancer/${s}`)).data}catch(r){throw((a=r.response)==null?void 0:a.data)||"Failed to block freelancer"}},rt=async s=>{var a;try{return(await G.put(`/api/admin/users/unblock-freelancer/${s}`)).data}catch(r){throw((a=r.response)==null?void 0:a.data)||"Failed to unblock freelancer"}},nt=async s=>{var a;try{return(await G.put(`/api/admin/users/block-client/${s}`)).data}catch(r){throw((a=r.response)==null?void 0:a.data)||"Failed to block client"}},lt=async s=>{var a;try{return(await G.put(`/api/admin/users/unblock-client/${s}`)).data}catch(r){throw((a=r.response)==null?void 0:a.data)||"Failed to unblock client"}},ct=()=>{const s=U(),[a,r]=t.useState(s),[x,d]=t.useState(!0),[o,m]=t.useState(null),[y,N]=t.useState(null),[C,j]=t.useState(0),[k,p]=t.useState(0),[g,f]=t.useState(null),[i,l]=t.useState([]),v=()=>r(!a);t.useEffect(()=>{(async()=>{try{const[c,h,M,R,J]=await Promise.all([Us(),Ie(),Te(),Bs(),Ys()]);console.log("Sales Report Response:",J),m(c.data),N(R.data),p(h.data.length),j(M.data.length),l(J.data)}catch(c){f(c.message||"Something went wrong")}finally{d(!1)}})()},[]);const L=i.map(b=>({month:new Date(b.createdAt).toLocaleString("default",{month:"short",year:"numeric"}),totalRevenue:b.amount.toFixed(2),freelancerEarnings:b.freelancerEarning.toFixed(2),platformEarnings:b.platformFee.toFixed(2)}));return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-black flex",children:[e.jsx($,{isCollapsed:a,toggleSidebar:v,isMobile:s}),e.jsxs("div",{className:"flex-1",children:[e.jsx(O,{toggleSidebar:v}),e.jsxs("main",{className:"p-6 bg-gray-300 dark:bg-zinc-900 min-h-[calc(100vh-4rem)] relative",children:[e.jsx("h1",{className:"text-gray-900 dark:text-white text-xl font-semibold mb-4",children:"Dashboard"}),x?e.jsxs("div",{className:"flex flex-wrap gap-6",children:[[1,2,3,4].map(b=>e.jsx("div",{className:"w-full sm:w-64 h-24",children:e.jsx(be,{className:"w-full h-full rounded-xl"})},b)),e.jsx("div",{className:"w-11/12",children:e.jsx(be,{className:"w-full h-[300px] rounded-xl"})})]}):g?e.jsx("p",{className:"text-red-500",children:g}):e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("div",{className:"bg-gray-200 dark:bg-zinc-800 rounded-xl shadow-md p-6 flex items-center gap-4 w-full sm:w-64 h-24",children:[e.jsx("div",{className:"p-3 text-green-600 dark:text-green-300 rounded-full",children:e.jsx(et,{size:38})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm text-gray-700 dark:text-gray-400",children:"Escrow Balance"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:["₹",o==null?void 0:o.toLocaleString()]})]})]}),y!==null&&e.jsxs("div",{className:"bg-gray-200 dark:bg-zinc-800 rounded-xl shadow-md p-6 flex items-center gap-4 w-full sm:w-64 h-24",children:[e.jsx("div",{className:"p-3 text-red-600 dark:text-red-300 rounded-full",children:"💰"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm text-gray-700 dark:text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:["₹",y.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-gray-200 dark:bg-zinc-800 rounded-xl shadow-md p-6 flex items-center gap-4 w-full sm:w-64 h-24",children:[e.jsx("div",{className:"p-3 text-blue-600 rounded-full",children:e.jsx(st,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm text-gray-700 dark:text-gray-400",children:"Total Clients"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:k})]})]}),e.jsxs("div",{className:"bg-gray-200 dark:bg-zinc-800 rounded-xl shadow-md p-6 flex items-center gap-4 w-full sm:w-64 h-24",children:[e.jsx("div",{className:"p-3 text-purple-600 rounded-full",children:e.jsx(tt,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm text-gray-700 dark:text-gray-400",children:"Total Freelancers"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:C})]})]}),e.jsxs("div",{className:"bg-gray-200 dark:bg-zinc-800 rounded-xl shadow-md p-6 flex flex-col w-11/12",children:[e.jsx("h2",{className:"text-gray-700 dark:text-gray-400 mb-4",children:"Monthly Sales Report"}),e.jsx(ks,{width:"100%",height:300,children:e.jsxs(Ns,{data:L,children:[e.jsx(ws,{strokeDasharray:"3 3"}),e.jsx(vs,{dataKey:"month"}),e.jsx(Cs,{}),e.jsx(Ss,{}),e.jsx(zs,{}),e.jsx(je,{type:"monotone",dataKey:"totalRevenue",stroke:"#8884d8"}),e.jsx(je,{type:"monotone",dataKey:"freelancerEarnings",stroke:"#82ca9d"}),e.jsx(je,{type:"monotone",dataKey:"platformEarnings",stroke:"#ff7300"})]})})]})]})]})]}),!a&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-10",onClick:()=>r(!0)})]})};var Ce="Switch",[it,Ft]=ns(Ce),[dt,ot]=it(Ce),_e=t.forwardRef((s,a)=>{const{__scopeSwitch:r,name:x,checked:d,defaultChecked:o,required:m,disabled:y,value:N="on",onCheckedChange:C,form:j,...k}=s,[p,g]=t.useState(null),f=as(a,b=>g(b)),i=t.useRef(!1),l=p?j||!!p.closest("form"):!0,[v=!1,L]=rs({prop:d,defaultProp:o,onChange:C});return e.jsxs(dt,{scope:r,checked:v,disabled:y,children:[e.jsx(ve.button,{type:"button",role:"switch","aria-checked":v,"aria-required":m,"data-state":$e(v),"data-disabled":y?"":void 0,disabled:y,value:N,...k,ref:f,onClick:ls(s.onClick,b=>{L(c=>!c),l&&(i.current=b.isPropagationStopped(),i.current||b.stopPropagation())})}),l&&e.jsx(xt,{control:p,bubbles:!i.current,name:x,value:N,checked:v,required:m,disabled:y,form:j,style:{transform:"translateX(-100%)"}})]})});_e.displayName=Ce;var qe="SwitchThumb",Oe=t.forwardRef((s,a)=>{const{__scopeSwitch:r,...x}=s,d=ot(qe,r);return e.jsx(ve.span,{"data-state":$e(d.checked),"data-disabled":d.disabled?"":void 0,...x,ref:a})});Oe.displayName=qe;var xt=s=>{const{control:a,checked:r,bubbles:x=!0,...d}=s,o=t.useRef(null),m=cs(r),y=is(a);return t.useEffect(()=>{const N=o.current,C=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(C,"checked").set;if(m!==r&&k){const p=new Event("click",{bubbles:x});k.call(N,r),N.dispatchEvent(p)}},[m,r,x]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...d,tabIndex:-1,ref:o,style:{...s.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function $e(s){return s?"checked":"unchecked"}var Ue=_e,ht=Oe;const ie=t.forwardRef(({className:s,...a},r)=>e.jsx(Ue,{className:ye("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:r,children:e.jsx(ht,{className:ye("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ie.displayName=Ue.displayName;const mt=["w-6","w-24","w-36","w-28","w-16","w-14","w-12","w-20"],ne=({rows:s=5,columns:a=8})=>e.jsx(e.Fragment,{children:Array.from({length:s}).map((r,x)=>e.jsx(D,{children:Array.from({length:a}).map((d,o)=>e.jsx(u,{className:"text-center",children:e.jsx(be,{className:`h-4 ${mt[o]||"w-24"} mx-auto ${o===a-1?"h-8 rounded-md":""}`})},`cell-${x}-${o}`))},`skeleton-${x}`))}),gt=()=>{const s=U(),[a,r]=t.useState(s),[x,d]=t.useState(""),[o,m]=t.useState(1),[y,N]=t.useState([]),[C,j]=t.useState(!0),[k,p]=t.useState(!1),[g,f]=t.useState(null),i=()=>r(!a);t.useEffect(()=>{(async()=>{try{const h=await Ie();N((h==null?void 0:h.data)||[])}catch(h){console.error(h)}finally{j(!1)}})()},[]);const l=async(c,h)=>{try{h?await lt(c):await nt(c),N(M=>M.map(R=>R._id===c?{...R,status:h?"active":"blocked"}:R))}catch(M){console.error("Failed to update client status:",M)}},v=c=>{f(c),p(!0)},L=y.filter(c=>c.name.toLowerCase().includes(x.toLowerCase())),b=5;return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-black flex",children:[e.jsx($,{isCollapsed:a,toggleSidebar:i,isMobile:s}),e.jsxs("div",{className:"flex-1",children:[e.jsx(O,{toggleSidebar:i}),e.jsxs("main",{className:"p-6 bg-gray-300 dark:bg-zinc-900 min-h-[calc(100vh-4rem)]",children:[e.jsx("h1",{className:"text-gray-900 dark:text-white text-xl font-semibold mb-4",children:"Clients"}),e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsx(A,{type:"text",placeholder:"Search clients...",value:x,onChange:c=>d(c.target.value),className:"w-64 bg-white dark:bg-zinc-800 text-gray-900 dark:text-gray-300 placeholder:text-xs"})}),e.jsxs("div",{className:"bg-gray-200 dark:bg-zinc-800 p-4 rounded-lg",children:[e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(D,{className:"bg-gray-300 dark:bg-zinc-700",children:[e.jsx(w,{className:"text-gray-900 dark:text-white",children:"SI No"}),e.jsx(w,{className:"text-gray-900 dark:text-white",children:"Name"}),e.jsx(w,{className:"text-gray-900 dark:text-white",children:"Email"}),e.jsx(w,{className:"text-gray-900 dark:text-white",children:"Joined At"}),e.jsx(w,{className:"text-gray-900 dark:text-white",children:"Status"}),e.jsx(w,{className:"text-gray-900 dark:text-white",children:"Actions"})]})}),e.jsx(Q,{children:C?e.jsx(ne,{rows:5,columns:6}):L.length>0?L.map((c,h)=>e.jsxs(D,{children:[e.jsx(u,{children:h+1}),e.jsx(u,{children:c.name}),e.jsx(u,{children:c.email}),e.jsx(u,{children:de(c.createdAt).format("DD MMM YYYY")}),e.jsx(u,{children:c.status}),e.jsx(u,{className:"text-center",children:e.jsx(oe,{children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsx("div",{className:"inline-block",children:e.jsx(ie,{checked:c.status==="blocked",onCheckedChange:()=>v(c)})})}),e.jsx(me,{children:c.status=="active"?"Block":"Unblock"})]})})},c._id),g&&e.jsx(B,{open:k,onOpenChange:M=>p(M),children:e.jsxs(Y,{children:[e.jsxs(H,{children:[e.jsx(V,{children:g.status==="active"?"Block Freelancer":"Unblock Freelancer"}),e.jsxs(K,{children:["Are you sure you want to"," ",g.status==="active"?"block":"unblock"," ","this freelancer?"]})]}),e.jsxs(W,{children:[e.jsx(F,{onClick:()=>{l(g._id,g.status==="blocked"),p(!1)},className:"btn btn-danger",children:"Confirm"}),e.jsx(F,{onClick:()=>p(!1),className:"btn btn-secondary",children:"Cancel"})]})]})})]},c._id)):e.jsx(D,{children:e.jsx(u,{colSpan:4,className:"text-center text-gray-500 dark:text-gray-400",children:"No clients found."})})})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(E,{children:e.jsx(te,{onClick:()=>m(c=>c-1),className:o===1?"pointer-events-none opacity-50":""})}),[...Array(Math.ceil(y.length/b))].map((c,h)=>e.jsx(E,{children:e.jsx(ae,{isActive:o===h+1,onClick:()=>m(h+1),children:h+1})},h)),e.jsx(E,{children:e.jsx(re,{onClick:()=>m(c=>c+1),className:o===Math.ceil(y.length/b)?"pointer-events-none opacity-50":""})})]})})})]})]})]}),!a&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-10",onClick:()=>r(!0)})]})},ut=()=>{const s=U(),[a,r]=t.useState(s),[x,d]=t.useState(""),[o,m]=t.useState(1),[y,N]=t.useState([]),[C,j]=t.useState(!0),[k,p]=t.useState(!1),[g,f]=t.useState(null),i=()=>r(!a);t.useEffect(()=>{(async()=>{try{const h=await Te();N((h==null?void 0:h.data)||[])}catch(h){console.error(h)}finally{j(!1)}})()},[]);const l=async(c,h)=>{try{h?await rt(c):await at(c),N(M=>M.map(R=>R._id===c?{...R,status:h?"active":"blocked"}:R))}catch(M){console.error("Failed to update freelancer status:",M)}},v=c=>{f(c),p(!0)},L=y.filter(c=>c.name.toLowerCase().includes(x.toLowerCase())),b=5;return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-black flex",children:[e.jsx($,{isCollapsed:a,toggleSidebar:i,isMobile:s}),e.jsxs("div",{className:"flex-1",children:[e.jsx(O,{toggleSidebar:i}),e.jsxs("main",{className:"p-6 bg-gray-300 dark:bg-zinc-900 min-h-[calc(100vh-4rem)]",children:[e.jsx("h1",{className:"text-gray-900 dark:text-white text-xl font-semibold mb-4",children:"Freelancers"}),e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsx(A,{type:"text",placeholder:"Search freelancers...",value:x,onChange:c=>d(c.target.value),className:"w-64 bg-white dark:bg-zinc-800 text-gray-900 dark:text-gray-300 placeholder:text-xs"})}),e.jsxs("div",{className:"bg-gray-200 dark:bg-zinc-800 p-4 rounded-lg",children:[e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(D,{className:"bg-gray-300 dark:bg-zinc-700",children:[e.jsx(w,{className:"text-gray-900 dark:text-white",children:"SI No"}),e.jsx(w,{className:"text-gray-900 dark:text-white",children:"Name"}),e.jsx(w,{className:"text-gray-900 dark:text-white",children:"Email"}),e.jsx(w,{className:"text-gray-900 dark:text-white",children:"Joined At"}),e.jsx(w,{className:"text-gray-900 dark:text-white",children:"Status"}),e.jsx(w,{className:"text-gray-900 dark:text-white",children:"Actions"})]})}),e.jsx(Q,{children:C?e.jsx(ne,{rows:5,columns:6}):L.length>0?L.map((c,h)=>e.jsxs(D,{children:[e.jsx(u,{children:h+1}),e.jsx(u,{children:c.name}),e.jsx(u,{children:c.email}),e.jsx(u,{children:de(c.createdAt).format("DD MMM YYYY")}),e.jsx(u,{children:c.status}),e.jsx(u,{className:"text-center",children:e.jsx(oe,{children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsx("div",{className:"inline-block",children:e.jsx(ie,{checked:c.status==="blocked",onCheckedChange:()=>v(c)})})}),e.jsx(me,{children:c.status==="active"?"Block":"Unblock"})]})})},c._id),g&&e.jsx(B,{open:k,onOpenChange:M=>p(M),children:e.jsxs(Y,{children:[e.jsxs(H,{children:[e.jsx(V,{children:g.status==="active"?"Block Freelancer":"Unblock Freelancer"}),e.jsxs(K,{children:["Are you sure you want to"," ",g.status==="active"?"block":"unblock"," ","this freelancer?"]})]}),e.jsxs(W,{children:[e.jsx(F,{onClick:()=>{l(g._id,g.status==="blocked"),p(!1)},className:"btn btn-danger",children:"Confirm"}),e.jsx(F,{onClick:()=>p(!1),className:"btn btn-secondary",children:"Cancel"})]})]})})]},c._id)):e.jsx(D,{children:e.jsx(u,{colSpan:4,className:"text-center text-gray-500 dark:text-gray-400",children:"No freelancers found."})})})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(E,{children:e.jsx(te,{onClick:()=>m(c=>c-1),className:o===1?"pointer-events-none opacity-50":""})}),[...Array(Math.ceil(y.length/b))].map((c,h)=>e.jsx(E,{children:e.jsx(ae,{isActive:o===h+1,onClick:()=>m(h+1),children:h+1})},h)),e.jsx(E,{children:e.jsx(re,{onClick:()=>m(c=>c+1),className:o===Math.ceil(y.length/b)?"pointer-events-none opacity-50":""})})]})})})]})]})]}),!a&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-10",onClick:()=>r(!0)})]})},jt=()=>{const s=U(),a=ke(),[r,x]=t.useState(s),[d,o]=t.useState(""),[m,y]=t.useState(1),[N,C]=t.useState([]),[j,k]=t.useState(!0),p=5;t.useEffect(()=>{g()},[]);const g=async()=>{try{k(!0);const l=await Ae();C(l.data)}catch(l){console.error("Failed to fetch contracts:",l)}finally{k(!1)}},f=()=>x(!r),i=l=>{a(`/admin/contracts/${l}`)};return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-black flex",children:[e.jsx($,{isCollapsed:r,toggleSidebar:f,isMobile:s}),e.jsxs("div",{className:"flex-1",children:[e.jsx(O,{toggleSidebar:f}),e.jsxs("main",{className:"p-6 bg-gray-300 dark:bg-zinc-900 min-h-[calc(100vh-4rem)]",children:[e.jsx("h1",{className:"text-gray-900 dark:text-white text-xl font-semibold mb-4",children:"Contracts"}),e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"relative w-64",children:[e.jsx(A,{type:"text",placeholder:"Search contracts...",value:d,onChange:l=>o(l.target.value),className:"w-full bg-white dark:bg-zinc-800 text-gray-900 dark:text-gray-300 placeholder:text-xs pr-10"}),d&&e.jsx("button",{onClick:()=>o(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"x"})]})}),e.jsx("div",{className:"bg-gray-200 dark:bg-zinc-800 p-4 rounded-lg",children:e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(D,{className:"bg-gray-300 dark:bg-zinc-700",children:[e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"SI No"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Contract ID"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Client"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Freelancer"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Status"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Amount"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Escrow Paid"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Actions"})]})}),e.jsx(Q,{children:j?e.jsx(ne,{rows:5,columns:8}):N.length>0?N.filter(l=>l.contractId.toLowerCase().includes(d.toLowerCase())).slice((m-1)*p,m*p).map((l,v)=>e.jsxs(D,{children:[e.jsx(u,{className:"text-center",children:(m-1)*p+v+1}),e.jsx(u,{className:"text-center",children:l.contractId}),e.jsx(u,{className:"text-center",children:l.clientId.name}),e.jsx(u,{className:"text-center",children:l.freelancerId.name}),e.jsx(u,{className:"text-center",children:l.status}),e.jsx(u,{className:"text-center",children:l.amount}),e.jsx(u,{className:"text-center",children:l.escrowPaid?"Yes":"No"}),e.jsx(u,{className:"text-center",children:e.jsx(F,{onClick:()=>i(l._id),className:"bg-slate-600 text-white text-xs px-3 py-1 hover:bg-slate-700",children:"View"})})]},l._id)):e.jsx(D,{children:e.jsx(u,{colSpan:6,className:"text-center text-gray-500 dark:text-gray-400",children:"No contracts found."})})})]})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(E,{children:e.jsx(te,{onClick:()=>y(l=>l-1),className:m===1?"pointer-events-none opacity-50":""})}),[...Array(Math.ceil(N.length/p))].map((l,v)=>e.jsx(E,{children:e.jsx(ae,{isActive:m===v+1,onClick:()=>y(v+1),children:v+1})},v)),e.jsx(E,{children:e.jsx(re,{onClick:()=>y(l=>l+1),className:m===Math.ceil(N.length/p)?"pointer-events-none opacity-50":""})})]})})})]})]}),!r&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-10",onClick:()=>x(!0)})]})},pt=()=>{const s=U(),[a,r]=t.useState(s),[x,d]=t.useState([]),[o,m]=t.useState(1),[y,N]=t.useState(""),[C,j]=t.useState(!0),k=5;t.useEffect(()=>{(async()=>{try{j(!0);const l=await Hs();d(l.data)}catch(l){console.error("Error fetching transactions:",l)}finally{j(!1)}})()},[]);const p=()=>r(!a),g=x.filter(i=>{var l;return((l=i.clientId)==null?void 0:l.name.toLowerCase().includes(y.toLowerCase()))||i.transactionType.toLowerCase().includes(y.toLowerCase())||i.amount.toString().includes(y)}),f=g.slice((o-1)*k,o*k);return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-black flex",children:[e.jsx($,{isCollapsed:a,toggleSidebar:p,isMobile:s}),e.jsxs("div",{className:"flex-1",children:[e.jsx(O,{toggleSidebar:p}),e.jsxs("main",{className:"p-6 bg-gray-300 dark:bg-zinc-900 min-h-[calc(100vh-4rem)]",children:[e.jsx("h1",{className:"text-gray-900 dark:text-white text-xl font-semibold mb-4",children:"Payments"}),e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"relative w-64",children:[e.jsx(A,{type:"text",placeholder:"Search transactions...",value:y,onChange:i=>N(i.target.value),className:"w-full bg-white dark:bg-zinc-800 text-gray-900 dark:text-gray-300 placeholder:text-xs pr-10"}),y&&e.jsx("button",{onClick:()=>N(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"x"})]})}),e.jsx("div",{className:"bg-gray-200 dark:bg-zinc-800 p-4 rounded-lg",children:e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(D,{className:"bg-gray-300 dark:bg-zinc-700",children:[e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"SI No"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Amount"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Platform Fee"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Date"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Client"}),e.jsx(w,{className:"text-center text-gray-900 dark:text-white",children:"Status"})]})}),e.jsx(Q,{children:C?e.jsx(ne,{rows:5,columns:6}):f.length>0?f.map((i,l)=>{var v;return e.jsxs(D,{children:[e.jsx(u,{className:"text-center",children:(o-1)*k+l+1}),e.jsxs(u,{className:"text-center",children:["₹",i.amount]}),e.jsxs(u,{className:"text-center",children:["₹",i.platformFee.toFixed(2)]}),e.jsx(u,{className:"text-center",children:de(i.createdAt).format("DD MMM YYYY")}),e.jsx(u,{className:"text-center",children:((v=i.clientId)==null?void 0:v.name)||"-"}),e.jsx(u,{className:"text-center capitalize",children:i.status})]},i._id)}):e.jsx(D,{children:e.jsx(u,{colSpan:5,className:"text-center text-gray-500 dark:text-gray-400",children:"No transactions found."})})})]})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(E,{children:e.jsx(te,{onClick:()=>m(i=>Math.max(i-1,1)),className:o===1?"pointer-events-none opacity-50":""})}),[...Array(Math.ceil(g.length/k))].map((i,l)=>e.jsx(E,{children:e.jsx(ae,{isActive:o===l+1,onClick:()=>m(l+1),children:l+1})},l)),e.jsx(E,{children:e.jsx(re,{onClick:()=>m(i=>i<Math.ceil(g.length/k)?i+1:i),className:o===Math.ceil(g.length/k)?"pointer-events-none opacity-50":""})})]})})})]})]}),!a&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-10",onClick:()=>r(!0)})]})},yt=()=>{const s=U(),[a,r]=t.useState(s),[x,d]=t.useState(""),[o,m]=t.useState(1),[y,N]=t.useState(!1),[C,j]=t.useState(""),[k,p]=t.useState([]),[g,f]=t.useState(""),[i,l]=t.useState({id:"",name:""}),[v,L]=t.useState(null),[b,c]=t.useState(!0),h=5;t.useEffect(()=>{M()},[]);const M=async()=>{try{c(!0);const n=await Ls();p(n.data)}catch(n){console.log("Failed to fetch categories :",n)}finally{c(!1)}},R=async()=>{const{valid:n,errors:S}=Se(g);if(!n){j(S.category||""),setTimeout(()=>j(""),3e3);return}try{await Fs({name:g}),q.success("Category added successfully!"),f(""),N(!1),M()}catch(z){j(z.error||"Failed to add category"),setTimeout(()=>j(""),3e3)}},J=async(n,S)=>{try{S?await Ms(n):await Ds(n),p(z=>z.map(P=>P._id===n?{...P,isListed:!S}:P))}catch(z){console.error("Failed to toggle category status",z)}},ge=async()=>{const{valid:n,errors:S}=Se(i.name);if(!n){j(S.category||""),setTimeout(()=>j(""),3e3);return}try{await Es(i.id,{name:i.name}),q.success("Category updated successfully!"),p(z=>z.map(P=>P._id===i.id?{...P,name:i.name}:P)),L(null)}catch(z){j(z.error||"Failed to update category"),setTimeout(()=>j(""),3e3)}},le=()=>r(!a);return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-black flex",children:[e.jsx($,{isCollapsed:a,toggleSidebar:le,isMobile:s}),e.jsxs("div",{className:"flex-1",children:[e.jsx(O,{toggleSidebar:le}),e.jsxs("main",{className:"p-6 bg-gray-300 dark:bg-zinc-900 min-h-[calc(100vh-4rem)]",children:[e.jsx("h1",{className:"text-gray-900 dark:text-white text-xl font-semibold mb-4",children:"Job Categories"}),e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(A,{type:"text",placeholder:"Search categories...",value:x,onChange:n=>d(n.target.value),className:"w-full bg-white dark:bg-zinc-800 text-gray-900 dark:text-gray-300 placeholder:text-xs pr-10"}),x&&e.jsx("button",{onClick:()=>d(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"x"})]}),e.jsxs(B,{open:y,onOpenChange:N,children:[e.jsx(ce,{asChild:!0,children:e.jsx(F,{className:"bg-emerald-500 text-white hover:bg-emerald-600",children:"Add Category"})}),e.jsxs(Y,{className:"sm:max-w-[425px]",children:[e.jsxs(H,{children:[e.jsx(V,{children:"Add New Category"}),e.jsx(K,{children:"Add the category name and save changes."})]}),e.jsx(A,{type:"text",placeholder:"Enter category name...",value:g,onChange:n=>f(n.target.value),className:"mt-2"}),e.jsxs(W,{children:[C&&e.jsx("p",{className:"text-red-500 text-sm mt-3 mr-10",children:C}),e.jsx(F,{className:"mt-4",onClick:R,children:"Save Category"})]})]})]})]}),e.jsx("div",{className:"bg-gray-200 dark:bg-zinc-800 p-4 rounded-lg",children:e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(D,{className:"bg-gray-300 dark:bg-zinc-700",children:[e.jsx(w,{className:"w-1/4 text-center text-gray-900 dark:text-white",children:"SI No"}),e.jsx(w,{className:"w-1/4 text-center text-gray-900 dark:text-white",children:"Category Name"}),e.jsx(w,{className:"w-1/4 text-center text-gray-900 dark:text-white",children:"Actions"}),e.jsx(w,{className:"w-1/4 text-center text-gray-900 dark:text-white",children:"Edit"})]})}),e.jsx(Q,{children:b?e.jsx(ne,{rows:5,columns:4}):k.length>0?k.filter(n=>n.name.toLowerCase().includes(x.toLowerCase())).slice((o-1)*h,o*h).map((n,S)=>e.jsxs(D,{children:[e.jsx(u,{className:"text-center",children:(o-1)*h+S+1}),e.jsx(u,{className:"text-center",children:n.name}),e.jsx(u,{className:"text-center",children:e.jsx(oe,{children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsx("div",{className:"inline-block",children:e.jsx(ie,{checked:n.isListed,onCheckedChange:()=>J(n._id,n.isListed)})})}),e.jsx(me,{children:n.isListed?"Make it inactive":"Make it active"})]})})}),e.jsx(u,{className:"text-center",children:e.jsxs(B,{open:v===n._id,onOpenChange:z=>{z||L(null)},children:[e.jsx(ce,{asChild:!0,children:e.jsx(F,{className:"mt-2 bg-slate-600 text-white text-xs px-3 py-1 hover:bg-slate-700",onClick:()=>{L(n._id),l({id:n._id,name:n.name})},children:"Edit"})}),e.jsxs(Y,{className:"sm:max-w-[425px]",children:[e.jsxs(H,{children:[e.jsx(V,{children:"Edit Category"}),e.jsx(K,{children:"Update the category name and save changes."})]}),e.jsx(A,{value:i.name,onChange:z=>l({...i,name:z.target.value})}),e.jsxs(W,{children:[C&&e.jsx("p",{className:"text-red-500 text-sm mt-3 mr-10",children:C}),e.jsx(F,{className:"mt-2",onClick:ge,children:"Save Changes"})]})]})]})})]},n._id)):e.jsx(D,{children:e.jsx(u,{colSpan:4,className:"text-center text-gray-500 dark:text-gray-400",children:"No categories found."})})})]})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(E,{children:e.jsx(te,{onClick:()=>m(n=>n-1),className:o===1?"pointer-events-none opacity-50":""})}),[...Array(Math.ceil(k.length/h))].map((n,S)=>e.jsx(E,{children:e.jsx(ae,{isActive:o===S+1,onClick:()=>m(S+1),children:S+1})},S)),e.jsx(E,{children:e.jsx(re,{onClick:()=>m(n=>n+1),className:o===Math.ceil(k.length/h)?"pointer-events-none opacity-50":""})})]})})})]})]}),!a&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-10",onClick:()=>r(!0)})]})},bt=()=>{const s=U(),[a,r]=t.useState(s),[x,d]=t.useState(""),[o,m]=t.useState(1),[y,N]=t.useState(!1),[C,j]=t.useState(""),[k,p]=t.useState([]),[g,f]=t.useState(""),[i,l]=t.useState({id:"",name:""}),[v,L]=t.useState(null),[b,c]=t.useState(!0),h=5;t.useEffect(()=>{M()},[]);const M=async()=>{try{c(!0);const n=await Ps();console.log("Fetched skills:",n),p(n.data)}catch(n){console.log("Failed to fetch skills :",n)}finally{c(!1)}},R=async()=>{const{valid:n,errors:S}=ze(g);if(!n){j(S.skill||""),setTimeout(()=>j(""),3e3);return}try{await Rs({name:g}),q.success("Skill added successfully!"),f(""),N(!1),M()}catch(z){j(z.error||"Failed to add skill"),setTimeout(()=>j(""),3e3)}},J=async(n,S)=>{try{S?await As(n):await Is(n),p(z=>z.map(P=>P._id===n?{...P,isListed:!S}:P))}catch(z){console.error("Failed to toggle skill status",z)}},ge=async()=>{const{valid:n,errors:S}=ze(i.name);if(!n){j(S.skill||""),setTimeout(()=>j(""),3e3);return}try{await Ts(i.id,{name:i.name}),q.success("Skill updated successfully!"),p(z=>z.map(P=>P._id===i.id?{...P,name:i.name}:P)),L(null)}catch(z){j(z.error||"Failed to update skill"),setTimeout(()=>j(""),3e3)}},le=()=>r(!a);return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-black flex",children:[e.jsx($,{isCollapsed:a,toggleSidebar:le,isMobile:s}),e.jsxs("div",{className:"flex-1",children:[e.jsx(O,{toggleSidebar:le}),e.jsxs("main",{className:"p-6 bg-gray-300 dark:bg-zinc-900 min-h-[calc(100vh-4rem)]",children:[e.jsx("h1",{className:"text-gray-900 dark:text-white text-xl font-semibold mb-4",children:"Skills"}),e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(A,{type:"text",placeholder:"Search skills...",value:x,onChange:n=>d(n.target.value),className:"w-full bg-white dark:bg-zinc-800 text-gray-900 dark:text-gray-300 placeholder:text-xs pr-10"}),x&&e.jsx("button",{onClick:()=>d(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"x"})]}),e.jsxs(B,{open:y,onOpenChange:N,children:[e.jsx(ce,{asChild:!0,children:e.jsx(F,{className:"bg-emerald-500 text-white hover:bg-emerald-600",children:"Add Skill"})}),e.jsxs(Y,{className:"sm:max-w-[425px]",children:[e.jsxs(H,{children:[e.jsx(V,{children:"Add New Skill"}),e.jsx(K,{children:"Add the skill name and save changes."})]}),e.jsx(A,{type:"text",placeholder:"Enter skill name...",value:g,onChange:n=>f(n.target.value),className:"mt-2"}),e.jsxs(W,{children:[C&&e.jsx("p",{className:"text-red-500 text-sm mt-3 mr-10",children:C}),e.jsx(F,{className:"mt-4",onClick:R,children:"Save"})]})]})]})]}),e.jsx("div",{className:"bg-gray-200 dark:bg-zinc-800 p-4 rounded-lg",children:e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(D,{className:"bg-gray-300 dark:bg-zinc-700",children:[e.jsx(w,{className:"w-1/4 text-center text-gray-900 dark:text-white",children:"SI No"}),e.jsx(w,{className:"w-1/4 text-center text-gray-900 dark:text-white",children:"Skill Name"}),e.jsx(w,{className:"w-1/4 text-center text-gray-900 dark:text-white",children:"Actions"}),e.jsx(w,{className:"w-1/4 text-center text-gray-900 dark:text-white",children:"Edit"})]})}),e.jsx(Q,{children:b?e.jsx(ne,{rows:5,columns:4}):k.length>0?k.filter(n=>n.name.toLowerCase().includes(x.toLowerCase())).slice((o-1)*h,o*h).map((n,S)=>e.jsxs(D,{children:[e.jsx(u,{className:"text-center",children:(o-1)*h+S+1}),e.jsx(u,{className:"text-center",children:n.name}),e.jsx(u,{className:"text-center",children:e.jsx(oe,{children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsx("div",{className:"inline-block",children:e.jsx(ie,{checked:n.isListed,onCheckedChange:()=>J(n._id,n.isListed)})})}),e.jsx(me,{children:n.isListed?"Make it inactive":"Make it active"})]})})}),e.jsx(u,{className:"text-center",children:e.jsxs(B,{open:v===n._id,onOpenChange:z=>{z||L(null)},children:[e.jsx(ce,{asChild:!0,children:e.jsx(F,{className:"mt-2 bg-slate-600 text-white text-xs px-3 py-1 hover:bg-slate-700",onClick:()=>{L(n._id),l({id:n._id,name:n.name})},children:"Edit"})}),e.jsxs(Y,{className:"sm:max-w-[425px]",children:[e.jsxs(H,{children:[e.jsx(V,{children:"Edit Skill"}),e.jsx(K,{children:"Update the skill name and save changes."})]}),e.jsx(A,{value:i.name,onChange:z=>l({...i,name:z.target.value})}),e.jsxs(W,{children:[C&&e.jsx("p",{className:"text-red-500 text-sm mt-3 mr-10",children:C}),e.jsx(F,{className:"mt-2",onClick:ge,children:"Save Changes"})]})]})]})})]},n._id)):e.jsx(D,{children:e.jsx(u,{colSpan:4,className:"text-center text-gray-500 dark:text-gray-400",children:"No skills found."})})})]})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(E,{children:e.jsx(te,{onClick:()=>m(n=>n-1),className:o===1?"pointer-events-none opacity-50":""})}),[...Array(Math.ceil(k.length/h))].map((n,S)=>e.jsx(E,{children:e.jsx(ae,{isActive:o===S+1,onClick:()=>m(S+1),children:S+1})},S)),e.jsx(E,{children:e.jsx(re,{onClick:()=>m(n=>n+1),className:o===Math.ceil(k.length/h)?"pointer-events-none opacity-50":""})})]})})})]})]}),!a&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-10",onClick:()=>r(!0)})]})};var ft="Label",Be=t.forwardRef((s,a)=>e.jsx(ve.label,{...s,ref:a,onMouseDown:r=>{var d;r.target.closest("button, input, select, textarea")||((d=s.onMouseDown)==null||d.call(s,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Be.displayName=ft;var Ye=Be;const kt=ds("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),fe=t.forwardRef(({className:s,...a},r)=>e.jsx(Ye,{ref:r,className:ye(kt(),s),...a}));fe.displayName=Ye.displayName;const Nt=()=>{const[s,a]=t.useState(!1),[r,x]=t.useState(""),[d,o]=t.useState(""),[m,y]=t.useState(!1),[N,C]=t.useState(""),j=De(),k=ke(),p=async g=>{var f,i,l,v,L;if(g.preventDefault(),!r||!d){q.error("Enter credentials");return}y(!0),C("");try{const b=await hs(r,d);console.log("Admin Login Response :",b),j(Je({_id:((f=b.user)==null?void 0:f.id)||"",email:((i=b.user)==null?void 0:i.email)||"",role:b.role||"",status:((l=b.user)==null?void 0:l.status)||"",profilePic:((v=b.user)==null?void 0:v.profilePic)||"",accessToken:b.accessToken||null,name:((L=b.user)==null?void 0:L.name)||""})),b.role==="admin"?k("/admin/dashboard"):q.error("Access denied for unauthorized users")}catch(b){C(b.error||"Admin login failed")}finally{y(!1)}};return e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx("div",{className:"hidden md:flex w-1/2 items-center justify-center bg-gray-900 text-white p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 dark:bg-gradient-to-r dark:from-emerald-400 dark:to-cyan-400 dark:bg-clip-text dark:text-transparent",children:"Welcome to Skillora Admin"}),e.jsx("p",{className:"text-lg",children:"Manage your platform efficiently and securely."})]})}),e.jsx("div",{className:"w-full md:w-1/2 flex items-center justify-center p-6 bg-slate-600 text-white",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("h2",{className:"text-center text-2xl font-bold mb-6",children:"Login"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(fe,{htmlFor:"email",children:"Email"}),e.jsx(A,{type:"email",id:"email",placeholder:"Enter your email",className:"bg-gray-800 text-white",onChange:g=>x(g.target.value)})]}),e.jsxs("div",{className:"mb-4 relative",children:[e.jsx(fe,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{type:s?"text":"password",id:"password",placeholder:"Enter your password",className:"bg-gray-800 text-white",onChange:g=>o(g.target.value)}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",onClick:()=>a(!s),children:s?e.jsx(os,{size:18}):e.jsx(xs,{size:18})})]})]}),N&&e.jsx("p",{className:"text-red-500 text-sm",children:N}),e.jsx(F,{className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white",type:"submit",disabled:m,children:m?"Logging in...":"Login"})]})]})})]})},_=({children:s,requiredRole:a})=>{const r=Ee(d=>d.user);return(r==null?void 0:r.accessToken)?a&&(r==null?void 0:r.role)!==a?e.jsx(pe,{to:`/${r.role}/home`,replace:!0}):e.jsx(e.Fragment,{children:s}):e.jsx(pe,{to:"/admin/login",replace:!0})},wt=()=>{const{contractId:s}=Ke(),a=U(),[r,x]=t.useState(a),[d,o]=t.useState(null),[m,y]=t.useState(null),[N,C]=t.useState(!1),[j,k]=t.useState(!1),[p,g]=t.useState(!1),[f,i]=t.useState(!0);t.useEffect(()=>{(async()=>{try{const b=await _s(s);o(b.contract),y(b.contract.releaseFundStatus)}catch(b){console.error("Failed to fetch contract details:",b)}finally{i(!1)}})()},[s]);const l=()=>x(!r),v=async()=>{C(!0);try{await Ws(d._id),k(!0),g(!1),q.success("Payment successfully released to the freelancer!")}catch(L){console.error("Fund release failed",L),q.error("Failed to release payment. Please try again.")}finally{C(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-200 dark:bg-zinc-800 flex",children:[e.jsx($,{isCollapsed:r,toggleSidebar:l,isMobile:a}),e.jsxs("div",{className:"flex-1",children:[e.jsx(O,{toggleSidebar:l}),e.jsx("main",{className:"p-6 bg-gray-300 dark:bg-zinc-900 min-h-[calc(100vh-4rem)] flex justify-center items-center",children:f?e.jsx(Ge,{}):d?e.jsxs("div",{className:"rounded-lg p-6 bg-gray-200 dark:bg-zinc-800 w-full max-w-6xl",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center mb-6",children:"Contract Details"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Contract ID:"})," ",d.contractId]}),e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",d.status]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold border-b pb-2",children:"Parties Involved"}),e.jsxs("div",{className:"flex justify-between items-start space-x-12",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("h3",{className:"text-medium font-semibold dark:text-teal-500 text-cyan-800",children:"FREELANCER"}),e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",d.freelancerId.name]}),e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",d.freelancerId.email]})]}),e.jsxs("div",{className:"w-1/2 text-right",children:[e.jsx("h3",{className:"text-medium font-semibold dark:text-teal-500 text-cyan-800",children:"CLIENT"}),e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",d.clientId.name]}),e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",d.clientId.email]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold border-b pb-2",children:"Job Details"}),e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Title:"})," ",d.jobId.title]}),e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Rate:"})," ₹",d.jobId.rate]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold border-b pb-2",children:"Additional Details"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Budget:"})," ₹",d.amount]}),e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Created At:"})," ",de(d.createdAt).format("DD MMM YYYY")]})]}),(d==null?void 0:d.releaseFundStatus)==="Requested"&&e.jsxs(B,{open:p,onOpenChange:g,children:[e.jsx(ce,{asChild:!0,children:e.jsx(F,{disabled:j||m==="Released",className:`group mt-4 text-sm px-5 py-2 rounded-full flex items-center gap-2 text-white transition-all duration-300 shadow-md ${j||m==="Released"?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-indigo-600 dark:from-purple-500 dark:to-indigo-500 hover:from-purple-700 hover:to-indigo-700 dark:hover:from-purple-600 dark:hover:to-indigo-600"}`,children:j||m==="Released"?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4"}),"Released"]}):e.jsxs(e.Fragment,{children:[e.jsx(Vs,{className:"w-4 h-4 transition-transform group-hover:scale-110"}),"Pay Freelancer"]})})}),e.jsxs(Y,{className:"sm:max-w-md",children:[e.jsxs(H,{children:[e.jsx(V,{children:"Confirm Final Fund Release"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will release the escrowed funds to the freelancer. Are you sure you want to proceed?"})]}),e.jsxs(W,{children:[e.jsx(F,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsxs(F,{onClick:v,disabled:N,className:"bg-green-600 hover:bg-green-700 text-white transition-all flex items-center gap-2",children:[N&&e.jsx(ms,{className:"w-4 h-4 animate-spin"}),N?"Processing...":"Confirm & Release"]})]})]})]})]})]})]})]}):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"Contract not found."})})]}),!r&&a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-10",onClick:()=>x(!0)})]})},Mt=()=>{const s=Ee(r=>r.user),a=s==null?void 0:s.accessToken;return e.jsxs(Xe,{children:[e.jsx(I,{path:"/login",element:a&&(s==null?void 0:s.role)==="admin"?e.jsx(pe,{to:"/admin/dashboard",replace:!0}):e.jsx(Nt,{})}),e.jsx(I,{path:"/dashboard",element:e.jsx(_,{requiredRole:"admin",children:e.jsx(ct,{})})}),e.jsx(I,{path:"/clients",element:e.jsx(_,{requiredRole:"admin",children:e.jsx(gt,{})})}),e.jsx(I,{path:"/freelancers",element:e.jsx(_,{requiredRole:"admin",children:e.jsx(ut,{})})}),e.jsx(I,{path:"/contracts",element:e.jsx(_,{requiredRole:"admin",children:e.jsx(jt,{})})}),e.jsx(I,{path:"/contracts/:contractId",element:e.jsx(_,{requiredRole:"admin",children:e.jsx(wt,{})})}),e.jsx(I,{path:"/payments",element:e.jsx(_,{requiredRole:"admin",children:e.jsx(pt,{})})}),e.jsx(I,{path:"/job-categories",element:e.jsx(_,{requiredRole:"admin",children:e.jsx(yt,{})})}),e.jsx(I,{path:"/skills",element:e.jsx(_,{requiredRole:"admin",children:e.jsx(bt,{})})}),e.jsx(I,{path:"*",element:e.jsx(qs,{})})]})};export{Mt as default};
