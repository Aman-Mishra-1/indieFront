import{e as _,a as $,j as e,r as a,V as P,i as Z,S as ee,L as Se,u as De,R as Ee,f as S}from"./index-C7mejEug.js";import{J as Fe,F as Ie,r as me,B as Pe,I as he,m as ge,s as ie,t as Re,G as Le,T as ue,S as A,d as B,e as q,f as M,g as I,C as pe,H as _e,K as Ae,M as Be,h as qe,L as Me,i as X,j as Te,k as Je,N as He,A as Oe,a as U,b as K,c as z,O as Ve,Q as We,U as Ye,n as $e,P as Ge,V as Ue,w as E,E as ce,x as Ke,y as ze,R as Qe,z as Xe,D as Ze}from"./ClientNav-r5Wbh7LV.js";import{c as te,B as k,I as C,N as et,L as je,X as tt,E as st,D as J,o as H,p as O,q as V,r as W,K as Y,J as de,O as oe,Q as at}from"./validation-B4MekqSY.js";import{o as T,h as ye,f as be,a as fe,g as rt,W as Q,m as lt,N as nt}from"./LineChart-BbdiGJvh.js";import{b as it,d as se,e as ae,c as re,f as ct,C as dt,F as ot}from"./card-BsimrSz4.js";import{M as xt}from"./index-DPAZO9us.js";import{H as mt,r as ht}from"./escrowApi-BAaftEYO.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ut=te("ClipboardList",gt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],jt=te("Mail",pt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],bt=te("MapPin",yt),ft=()=>{const d=_(j=>j.user.name),t=$();return e.jsx("div",{className:"min-h-screen dark:bg-gray-950 flex flex-col items-center",children:e.jsxs("div",{className:"w-full max-w-6xl px-6 mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mt-20",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold",children:[e.jsx("span",{className:"text-black dark:text-white",children:"Welcome, "}),e.jsx("span",{className:"text-[#0077B6] dark:bg-gradient-to-r dark:from-emerald-400 dark:to-cyan-400 dark:bg-clip-text dark:text-transparent",children:d})]}),e.jsx(k,{onClick:()=>t("/client/post-job"),className:`bg-[#0077B6] hover:bg-[#005f8c] text-white px-4 py-2 rounded-lg 
                        dark:bg-transparent dark:border dark:border-[#00FFE5] dark:text-[#00FFE5] 
                        dark:hover:bg-[#00FFE511] sm:text-base sm:px-5 sm:py-2.5`,children:"+ Post Work"})]}),e.jsx(Fe,{})]})})},Nt=({profile:d,onUpdate:t})=>{const j=_(i=>i.user._id),[y,v]=a.useState({firstName:(d==null?void 0:d.firstName)||"",city:(d==null?void 0:d.city)||"",state:(d==null?void 0:d.state)||""}),[b,m]=a.useState({}),u=i=>{const{name:p,value:c}=i.target;v(g=>({...g,[p]:c})),m(g=>({...g,[p]:""}))},o=async i=>{i.preventDefault();const p=et(y);if(Object.keys(p).length>0){m(p);return}try{const c=await Ie(j,y);P.success("Profile updated successfully!"),t==null||t(c.data)}catch(c){console.error("Error updatinf profile",c)}};return e.jsx("div",{className:"w-full sm:w-5/6 md:w-2/3 p-6 mx-auto",children:e.jsxs(it,{className:"w-full border-none",children:[e.jsx(se,{children:e.jsx(ae,{className:"text-lg font-bold text-center text-gray-900 dark:text-white",children:"Update Profile"})}),e.jsx(re,{children:e.jsxs("form",{className:"space-y-4",onSubmit:o,children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Name"}),e.jsx(C,{type:"text",className:"w-full text-xs placeholder:text-xs",name:"firstName",value:y.firstName,onChange:u}),b.firstName&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"City"}),e.jsx(C,{type:"text",className:"w-full text-xs placeholder:text-xs",name:"city",value:y.city,onChange:u}),b.city&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"State"}),e.jsx(C,{type:"text",className:"w-full text-xs placeholder:text-xs",name:"state",value:y.state,onChange:u}),b.state&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:b.state})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(k,{type:"submit",className:"bg-[#0077B6] dark:bg-gray-900 dark:text-white",children:"Save"})})]})})]})})},kt=()=>{const d=_(h=>{var N;return(N=h.user)==null?void 0:N.email}),t=_(h=>{var N;return(N=h.user)==null?void 0:N._id}),[j,y]=a.useState(!1),[v,b]=a.useState(!1),[m,u]=a.useState(null),[o,i]=a.useState([]),[p,c]=a.useState(5),[g,D]=a.useState(!0),[l,r]=a.useState(0),[n,x]=a.useState(!1);a.useEffect(()=>{(async()=>{if(t)try{const N=await ie(t);u(N.data)}catch(N){console.log("Error fetching client profile",N)}})()},[t]);const s=h=>{u(h),y(!1)},f=async h=>{var R;const N=(R=h.target.files)==null?void 0:R[0];if(!(!N||!t))try{b(!0),await Le(t,N);const L=await ie(t);u(L.data),h.target.value=""}catch(L){console.log("Error uploading image :",L)}finally{b(!1)}};return a.useEffect(()=>{(async()=>{try{const N=await Re(t);r(N.jobs.length);const R=(N.jobs||[]).sort((L,G)=>new Date(G.createdAt).getTime()-new Date(L.createdAt).getTime());i(R)}catch(N){console.log(N)}finally{D(!1)}})()},[t]),e.jsxs("div",{className:"min-h-screen dark:bg-gray-950 flex justify-center p-6",children:[e.jsx(me,{}),e.jsxs("div",{className:"w-full max-w-6xl bg-white dark:bg-gray-950 rounded-xl border border-gray-300 dark:border-gray-800 p-8 mt-16 flex flex-col md:flex-row",children:[e.jsx("div",{className:"w-full md:w-1/3 border-b md:border-b-0 md:border-r border-gray-300 dark:border-gray-800 p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"relative group",children:v?e.jsx("div",{className:"w-28 h-28 rounded-full border border-gray-300 dark:border-gray-700 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#0077B6] dark:border-cyan-400"})}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:(m==null?void 0:m.profilePic)||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"Profile",className:"w-28 h-28 rounded-full border border-gray-300 dark:border-gray-700 object-cover"}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("span",{className:"text-white text-sm font-medium cursor-pointer",onClick:()=>{var h;return(h=document.getElementById("fileInput"))==null?void 0:h.click()},children:"Edit"}),e.jsx("input",{type:"file",id:"fileInput",className:"hidden",accept:"image/png, image/jpeg, image/jpg, image/webp",onChange:h=>f(h)})]})]})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-3xl font-bold text-black dark:text-white",children:m==null?void 0:m.firstName}),e.jsx(Pe,{className:"w-5 h-5 mt-1 text-blue-600"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center justify-center gap-1 mt-2",children:[e.jsx(he,{className:"text-xl"})," ",m==null?void 0:m.city]}),e.jsx(k,{onClick:()=>y(!j),className:`mt-4 border border-[#0077B6] text-[#0077B6] bg-transparent 
                                hover:bg-[#0077B611] hover:text-[#0077B6] 
                                dark:border-[#00FFE5] dark:text-[#00FFE5] dark:hover:bg-[#00FFE511] dark:hover:text-[#00FFE5]`,children:j?"Cancel":"Edit Profile"})]})]})}),j?e.jsx(Nt,{profile:m,onUpdate:s}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full md:w-2/3 p-6",children:[e.jsxs("div",{className:"space-y-7 text-black dark:text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold font-sans",children:"Email"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d})]}),e.jsx(jt,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold font-sans",children:"State"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:(m==null?void 0:m.state)||"No state provided"})]}),e.jsx(bt,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold font-sans",children:"Works Posted"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l})]}),e.jsx(ut,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})]})]}),g?e.jsx("div",{className:"space-y-4 mt-10 w-full max-w-full px-0 sm:px-4",children:Array.from({length:3}).map((h,N)=>e.jsxs("div",{className:"border border-gray-300 dark:border-gray-700 p-3 sm:p-4 rounded-xl mb-4",children:[e.jsx(T,{className:"h-5 w-1/3 mb-2"}),e.jsx(T,{className:"h-4 w-2/3 mb-1"}),e.jsx(T,{className:"h-4 w-full mb-1"}),e.jsx(T,{className:"h-4 w-1/2"})]},N))}):e.jsxs("div",{className:"mt-10 w-full max-w-full px-0 sm:px-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white",children:"Posted Works"}),o.slice(0,p).map(h=>e.jsxs("div",{className:"border border-gray-300 dark:border-gray-700 p-3 sm:p-4 rounded-xl mb-4 w-full overflow-hidden",children:[e.jsx("h4",{className:"text-base font-semibold text-black dark:text-white",children:h.title}),e.jsxs("p",{className:"text-gray-600 text-sm dark:text-gray-400 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Category:"})," ",h.category.name]}),e.jsxs("p",{className:"text-gray-600 text-sm dark:text-gray-400 mb-1",children:[e.jsx("span",{className:"font-semibold",children:"Description:"})," ",n?h.description:`${h.description.slice(0,20)}${h.description.length>20?"...":""}`,h.description.length>20&&e.jsx("button",{onClick:()=>x(!n),className:"text-blue-600 ml-2 underline text-xs",children:n?"View less":"View more"})]}),e.jsxs("p",{className:"text-gray-600 text-sm dark:text-gray-400 mb-1",children:[e.jsx("span",{className:"font-semibold",children:"Posted on:"})," ",ye(h.createdAt).format("MMM D, YYYY h:mm A")]})]},h._id)),o.length>p&&e.jsxs("p",{onClick:()=>c(h=>h+5),className:`mt-4 text-blue-950 px-4 py-2 flex items-center gap-2
                                        dark:bg-transparent dark:text-[#00FFE5] self-center cursor-pointer`,children:["View More",e.jsx(ge,{className:"w-4 h-4"})]})]})]})})]})]})},vt=()=>{const[d,t]=a.useState([]),[j,y]=a.useState([]),[v,b]=a.useState([]),m=_(r=>r.user._id),[u,o]=a.useState(!1),[i,p]=a.useState({title:"",description:"",rate:"",experienceLevel:"",location:"",category:"",startDate:"",endDate:""});a.useEffect(()=>{(async()=>{try{const[n,x]=await Promise.all([be(),fe()]);t(n.data.map(s=>({id:s._id,name:s.name}))),y(x.data.map(s=>({id:s._id,name:s.name})))}catch(n){console.error("Error fetching skills:",n)}})()},[]);const c=r=>{b(n=>n.includes(r)?n.filter(x=>x!==r):[...n,r])},g=r=>{p({...i,[r.target.name]:r.target.value})},D=$(),l=async r=>{r.preventDefault(),o(!0);const n={userId:m,title:i.title,description:i.description,rate:Number(i.rate),experienceLevel:i.experienceLevel,location:i.location,category:i.category,skills:v,startDate:i.startDate?new Date(i.startDate):void 0,endDate:i.endDate?new Date(i.endDate):void 0};try{const x=await _e(n);console.log(x),P.success("Job posted successfully!"),setTimeout(()=>D("/client/home"),2e3)}catch(x){console.error("Error posting job:",x),P.error(x.error)}finally{o(!1)}};return e.jsxs("div",{className:"max-w-6xl mx-auto my-10 bg-white dark:bg-gray-950 p-6 rounded-lg border-none",children:[e.jsx(se,{children:e.jsx(ae,{className:"text-xl font-semibold text-center text-gray-900 dark:text-white",children:"Post Your Job"})}),e.jsx(re,{children:e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Title *"}),e.jsx(C,{type:"text",name:"title",value:i.title,onChange:g,className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800",placeholder:"Eg: Graphic Designer"})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Description *"}),e.jsx(ue,{name:"description",value:i.description,onChange:g,rows:3,className:"text-xs placeholder:text-gray-500 mt-1.5 h-16 border border-gray-400 dark:border-gray-800",placeholder:"Eg: Looking for a designer experienced in Figma"})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Budget *"}),e.jsx(C,{type:"number",name:"rate",value:i.rate,onChange:g,min:"0",className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800",placeholder:"Eg: Type your price in numbers"})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Experience Level *"}),e.jsxs(A,{onValueChange:r=>p({...i,experienceLevel:r}),children:[e.jsx(B,{className:"border-gray-400 dark:border-gray-800 h-11 mt-1.5",children:e.jsx(q,{placeholder:"Select experience level"})}),e.jsxs(M,{children:[e.jsx(I,{value:"Beginner",children:"Beginner"}),e.jsx(I,{value:"Intermediate",children:"Intermediate"}),e.jsx(I,{value:"Expert",children:"Expert"})]})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Location *"}),e.jsx(C,{type:"text",name:"location",value:i.location,onChange:g,className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800",placeholder:"Eg: Kerala, Remote, etc."})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Job Category *"}),e.jsxs(A,{onValueChange:r=>p(n=>({...n,category:r})),children:[e.jsx(B,{className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800",children:e.jsx(q,{placeholder:"Select job category"})}),e.jsx(M,{children:j.map(r=>e.jsx(I,{value:r.id,children:r.name},r.id))})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Skills Required *"}),e.jsx("div",{className:"border rounded-lg p-7 flex flex-wrap gap-5 mt-1.5 border-gray-400 dark:border-gray-800",children:d.map(r=>e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(pe,{id:r.id,checked:v.includes(r.id),onCheckedChange:()=>c(r.id)}),e.jsx("label",{htmlFor:r.id,className:"text-sm cursor-pointer",children:r.name})]},r.id))}),v.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:v.map(r=>{var x;const n=((x=d.find(s=>s.id===r))==null?void 0:x.name)||"Unknown Skill";return e.jsx("span",{className:"bg-emerald-600 text-white px-3 py-1 rounded-lg text-xs",children:n},r)})})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Start Date"," ",e.jsx("span",{className:"text-gray-500 text-sm",children:"(optional)"})]}),e.jsx(C,{type:"date",name:"startDate",value:i.startDate,onChange:g,className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["End Date"," ",e.jsx("span",{className:"text-gray-500 text-sm",children:"(optional)"})]}),e.jsx(C,{type:"date",name:"endDate",value:i.endDate,onChange:g,className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800"})]})]}),e.jsxs("div",{className:"flex justify-center md:justify-end gap-3 mt-8",children:[e.jsx(k,{onClick:()=>window.history.back(),type:"button",className:"border border-[#DC2626] text-[#DC2626] bg-transparent hover:bg-[#DC262611]",children:"Cancel"}),e.jsxs(k,{type:"submit",disabled:u,className:`border border-[#0077B6] text-[#0077B6] bg-transparent hover:bg-[#0077B611] flex items-center justify-center gap-2 ${u?"opacity-60 cursor-not-allowed":""}`,children:[u&&e.jsx(je,{className:"animate-spin w-5 h-5"}),u?"Submitting...":"Submit"]})]})]})})]})},wt=()=>{const{id:d}=Z(),t=$(),[j,y]=a.useState([]),[v,b]=a.useState([]),[m,u]=a.useState([]),[o,i]=a.useState({title:"",description:"",rate:"",experienceLevel:"",status:"",location:"",category:"",startDate:"",endDate:""}),p=l=>l?new Date(l).toISOString().split("T")[0]:"";a.useEffect(()=>{const l=async()=>{try{const x=(await Ae(d)).data;i({title:x.title,description:x.description,rate:x.rate.toString(),experienceLevel:x.experienceLevel,status:x.status,location:x.location,category:x.category._id,startDate:p(x.startDate),endDate:p(x.endDate)}),u(x.skills.map(s=>s._id))}catch(n){console.error("Error fetching job details:",n)}},r=async()=>{try{const[n,x]=await Promise.all([be(),fe()]);y(n.data.map(s=>({id:s._id,name:s.name}))),b(x.data.map(s=>({id:s._id,name:s.name})))}catch(n){console.error("Error fetching skills or categories:",n)}};l(),r()},[d]);const c=l=>{u(r=>r.includes(l)?r.filter(n=>n!==l):[...r,l])},g=l=>{i({...o,[l.target.name]:l.target.value})},D=async l=>{l.preventDefault();const r={title:o.title,description:o.description,rate:Number(o.rate),experienceLevel:o.experienceLevel,status:o.status,location:o.location,category:o.category,skills:m,startDate:o.startDate,endDate:o.endDate};try{const n=await Be(d,r);console.log(n),P.success("Job updated successfully!"),setTimeout(()=>t(-1),1e3)}catch(n){console.error("Error updating job:",n),P.error(n.error)}};return e.jsxs("div",{className:"max-w-6xl mx-auto my-10 bg-white dark:bg-gray-950 p-6 rounded-lg border-none",children:[e.jsx(se,{children:e.jsx(ae,{className:"text-xl font-semibold text-center text-gray-900 dark:text-white",children:"Edit Your Job"})}),e.jsx(re,{children:e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Title"}),e.jsx(C,{type:"text",name:"title",value:o.title,onChange:g,className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800",placeholder:"Eg: Graphic Designer"})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Description"}),e.jsx(C,{type:"text",name:"description",value:o.description,onChange:g,className:"text-xs placeholder:text-gray-500 mt-1.5 h-16 border border-gray-400 dark:border-gray-800",placeholder:"Eg: Looking for a designer experienced in Figma"})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Budget"}),e.jsx(C,{type:"number",name:"rate",value:o.rate,onChange:g,min:"0",className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800",placeholder:"Eg: Type your price in numbers"})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Experience Level"}),e.jsxs(A,{onValueChange:l=>i({...o,experienceLevel:l}),value:o.experienceLevel,children:[e.jsx(B,{className:"border-gray-400 dark:border-gray-800 h-11 mt-1.5",children:e.jsx(q,{placeholder:"Select experience level"})}),e.jsxs(M,{children:[e.jsx(I,{value:"Beginner",children:"Beginner"}),e.jsx(I,{value:"Intermediate",children:"Intermediate"}),e.jsx(I,{value:"Expert",children:"Expert"})]})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Job Status"}),e.jsxs(A,{onValueChange:l=>i({...o,status:l}),value:o.status,children:[e.jsx(B,{className:"border-gray-400 dark:border-gray-800 h-11 mt-1.5",children:e.jsx(q,{placeholder:"Select job status"})}),e.jsxs(M,{children:[e.jsx(I,{value:"Open",children:"Open"}),e.jsx(I,{value:"Ongoing",children:"Ongoing"}),e.jsx(I,{value:"Closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Location"}),e.jsx(C,{type:"text",name:"location",value:o.location,onChange:g,className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800",placeholder:"Eg: Kerala, Remote, etc."})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Job Category"}),e.jsxs(A,{onValueChange:l=>i(r=>({...r,category:l})),value:o.category,children:[e.jsx(B,{className:"text-sm placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800",children:e.jsx(q,{placeholder:"Select job category"})}),e.jsx(M,{children:v.map(l=>e.jsx(I,{value:l.id,children:l.name},l.id))})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Skills Required"}),e.jsx("div",{className:"border rounded-lg p-7 flex flex-wrap gap-5 mt-1.5 border-gray-400 dark:border-gray-800",children:j.map(l=>e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(pe,{id:l.id,checked:m.includes(l.id),onCheckedChange:()=>c(l.id)}),e.jsx("label",{htmlFor:l.id,className:"text-sm cursor-pointer",children:l.name})]},l.id))}),m.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:m.map(l=>{var n;const r=((n=j.find(x=>x.id===l))==null?void 0:n.name)||"Unknown Skill";return e.jsx("span",{className:"bg-emerald-600 text-white px-3 py-1 rounded-lg text-xs",children:r},l)})})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Start Date"}),e.jsx(C,{type:"date",name:"startDate",value:o.startDate,onChange:g,className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"End Date"}),e.jsx(C,{type:"date",name:"endDate",value:o.endDate,onChange:g,className:"text-xs placeholder:text-gray-500 mt-1.5 h-11 border border-gray-400 dark:border-gray-800"})]})]}),e.jsxs("div",{className:"flex justify-center md:justify-end gap-3 mt-8",children:[e.jsx(k,{onClick:()=>window.history.back(),type:"button",className:"border border-[#DC2626] text-[#DC2626] bg-transparent hover:bg-[#DC262611]",children:"Cancel"}),e.jsx(k,{type:"submit",className:"border border-[#0077B6] text-[#0077B6] bg-transparent hover:bg-[#0077B611]",children:"Update"})]})]})})]})},Ct=()=>{var g,D,l,r,n,x;const{freelancerId:d}=Z(),[t,j]=a.useState(null),[y,v]=a.useState(!0),[b,m]=a.useState([]),[u,o]=a.useState(null),[i,p]=a.useState([]),c=50;return a.useEffect(()=>{(async()=>{if(d)try{const f=await Te(d);j(f.data)}catch(f){console.error("Error fetching freelancer profile:",f)}finally{v(!1)}})()},[d]),a.useEffect(()=>{(async()=>{if(d)try{const f=await rt(d);m(f.contracts||[])}catch(f){console.error("Error fetching completed works:",f)}})()},[d]),a.useEffect(()=>{(async()=>{if(d)try{const f=await Je(d);p(f.data)}catch(f){console.error("Failed to fetch reviews",f)}})()},[d]),y?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(ee,{})}):t?e.jsx("div",{className:"min-h-screen dark:bg-gray-950 flex justify-center p-6 mt-5",children:e.jsxs("div",{className:"w-full max-w-6xl bg-white dark:bg-gray-950 rounded-xl border border-gray-300 dark:border-gray-800 p-8 mt-16",children:[e.jsx("div",{className:"relative flex flex-col md:flex-row justify-between items-center md:items-start",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:t.profilePic||"/default-profile.png",alt:"Profile",className:"w-28 aspect-square rounded-full border border-gray-300 dark:border-gray-700 object-cover"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-black dark:bg-gradient-to-r dark:from-emerald-400 dark:to-cyan-400 dark:bg-clip-text dark:text-transparent",children:t.firstName}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 flex items-center gap-1 mt-2",children:[e.jsx(he,{className:"text-xl"})," ",t.city||"No city provided"]})]})]})}),e.jsx("hr",{className:"my-6 border-gray-300 dark:border-gray-900"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[0.8fr_auto_1.6fr] gap-6",children:[e.jsxs("div",{className:"space-y-7 text-black dark:text-white",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold font-sans",children:"Experience Level"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.experienceLevel||"No experience provided"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold font-sans",children:"Languages"}),t.language&&t.language.length>0?t.language.map((s,f)=>e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s},f)):e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No languages specified"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold font-sans",children:"Linked Accounts"}),e.jsxs("div",{className:"flex flex-col gap-3 mt-2",children:[((g=t.linkedAccounts)==null?void 0:g.github)&&e.jsxs(k,{variant:"outline",className:"w-48 flex items-center justify-center gap-2",onClick:()=>window.open(t.linkedAccounts.github,"_blank"),children:[e.jsx(qe,{className:"w-6 h-6"}),"GitHub"]}),((D=t.linkedAccounts)==null?void 0:D.linkedIn)&&e.jsxs(k,{variant:"outline",className:"w-48 flex items-center justify-center gap-2",onClick:()=>window.open(t.linkedAccounts.linkedIn,"_blank"),children:[e.jsx(ct,{className:"w-6 h-6"}),"LinkedIn"]}),((l=t.linkedAccounts)==null?void 0:l.website)&&e.jsxs(k,{variant:"outline",className:"w-48 flex items-center justify-center gap-2",onClick:()=>window.open(t.linkedAccounts.website,"_blank"),children:[e.jsx(Me,{className:"w-6 h-6"}),"Website"]}),!((r=t.linkedAccounts)!=null&&r.github)&&!((n=t.linkedAccounts)!=null&&n.linkedIn)&&!((x=t.linkedAccounts)!=null&&x.website)&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No social links provided"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold font-sans",children:"Work Experience"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t!=null&&t.employmentHistory&&t.employmentHistory.length>0?t.employmentHistory.map((s,f)=>e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold font-sans",children:s.company}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s.position}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s.duration})]}),f<t.employmentHistory.length-1&&e.jsx("hr",{className:"border-gray-300 dark:border-gray-900 mt-6"})]},s._id||f)):e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No employment history provided"})})]})]}),e.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-900"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-black dark:text-white",children:t.title||"No title provided"}),e.jsx("p",{className:"mt-8 text-gray-600 dark:text-gray-400",children:t.bio||"No bio provided"}),e.jsx("hr",{className:"my-6 border-gray-300 dark:border-gray-900"}),e.jsx("h2",{className:"text-xl font-bold text-black dark:text-white mt-6",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-3",children:t.skills.map(s=>e.jsx("div",{className:"bg-gray-200 dark:bg-gray-800 px-4 py-2 rounded-3xl text-black dark:text-white font-semibold text-sm",children:s.name},s._id))})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Completed Works (",b.length,")"]}),b.length===0?e.jsx("p",{className:"text-gray-500",children:"No completed works yet."}):e.jsx("div",{className:"space-y-4",children:b.map(s=>e.jsxs("div",{className:"p-4 border rounded-md shadow-sm bg-gray-200 dark:bg-gray-900",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:s.jobId.title}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[u===s._id?s.jobId.description:`${s.jobId.description.slice(0,c)}${s.jobId.description.length>c?"...":""}`,s.jobId.description.length>c&&e.jsx("span",{onClick:()=>o(u===s._id?null:s._id),className:"ml-2 text-blue-500 cursor-pointer hover:underline text-xs",children:u===s._id?"View Less":"View More"})]}),e.jsxs("p",{className:"text-sm mt-1",children:[e.jsx("span",{className:"font-medium",children:"Client : "})," ",s.clientId.name," (",s.clientId.email,")"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Budget : "})," ₹",s.jobId.rate]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Work status : "}),s.status]})]},s._id))})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Client Reviews"}),i.length===0?e.jsx("p",{className:"text-gray-500",children:"No reviews yet."}):e.jsx("div",{className:"space-y-6",children:i.map(s=>e.jsxs("div",{className:"border p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("img",{src:s.clientId.profilePic||"https://ui-avatars.com/api/?name="+encodeURIComponent(s.clientId.name),alt:s.clientId.name,className:"w-8 h-8 rounded-full"}),e.jsx("span",{className:"font-medium",children:s.clientId.name})]}),e.jsxs("div",{className:"flex gap-1 mb-1",children:[[...Array(5)].map((f,h)=>e.jsx(X,{className:`w-4 h-4 ${h<Math.floor(s.rating)?"text-yellow-500":"text-gray-300"}`,fill:h<Math.floor(s.rating)?"#facc15":"none"},h)),s.rating%1!==0&&e.jsx(X,{className:"w-4 h-4 text-yellow-400",fill:"url(#half)"})]}),e.jsx("p",{className:"text-sm dark:text-gray-300 text-gray-700",children:s.description}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(s.createdAt).toLocaleDateString()})]},s._id))})]})]})}):e.jsx("p",{className:"text-center text-gray-600 mt-40",children:"Freelancer profile not found."})},St=()=>{const d=_(c=>c.user._id),[t,j]=a.useState([]),[y,v]=a.useState(5),[b,m]=a.useState(!0),[u,o]=a.useState(""),i=$();a.useEffect(()=>{(async()=>{try{const g=await He(d);j(g.data)}catch(g){console.error("Failed to fetch contracts:",g.error),P.error(g.error)}finally{m(!1)}})()},[d]);const p=t.filter(c=>c.jobId.title.toLowerCase().includes(u.toLowerCase()));return b?e.jsx("div",{className:"flex justify-center items-center min-h-[calc(100vh-4rem)]",children:e.jsx(ee,{})}):e.jsx("div",{className:"min-h-screen dark:bg-gray-950 flex flex-col items-center mt-20",children:e.jsxs("div",{className:"w-full max-w-6xl px-6 mt-10",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-3",children:[e.jsx("h2",{className:"text-xl font-semibold mt-2",children:"My Contracts"}),e.jsxs("div",{className:"w-full sm:w-72 md:w-96 lg:max-w-[600px] relative",children:[e.jsx("input",{type:"text",placeholder:"Search contracts...",className:`w-full border p-2.5 pl-3 pr-8 rounded-lg text-sm dark:bg-gray-950 dark:text-white 
                            focus:outline-none focus:ring-1 focus:ring-gray-400 dark:focus:ring-gray-600`,value:u,onChange:c=>o(c.target.value)}),u&&e.jsx(tt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 cursor-pointer hover:text-gray-700",onClick:()=>o("")})]})]}),p.length>0?e.jsxs("div",{className:"flex flex-col gap-5 mt-9",children:[p.slice(0,y).map(c=>e.jsxs("div",{className:"border rounded-lg p-5 bg-gray-100 dark:bg-gray-900 hover:bg-white dark:hover:bg-gray-950 transition duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"font-semibold",children:c.jobId.title}),e.jsx(st,{className:"text-gray-500 cursor-pointer hover:text-gray-700 w-5 h-5",onClick:()=>i(`/client/contract/${c._id}`)})]}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400 mt-1",children:["Budget: ₹",c.amount]}),e.jsxs("p",{className:"text-sm mt-1 text-gray-700 dark:text-gray-400",children:["Contract:"," ",e.jsx("span",{className:c.status==="Canceled"?"text-red-600 dark:text-red-400":c.status==="Completed"?"text-green-600 dark:text-green-500":"text-gray-700 dark:text-gray-400",children:c.status})]}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400 mt-1",children:["Freelancer: ",c.freelancerId.name]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 font-medium",children:["Contract ID: ",c.contractId]})]},c._id)),y<p.length&&e.jsxs("p",{onClick:()=>v(c=>c+5),className:`mt-4 text-blue-950 px-4 py-2 flex items-center gap-2
                            dark:bg-transparent dark:text-[#00FFE5] self-center cursor-pointer`,children:["View More",e.jsx(ge,{className:"w-4 h-4"})]})]}):e.jsx("div",{className:"p-10 mt-4 flex flex-col items-center text-center bg-white dark:bg-gray-950",children:e.jsx("p",{className:"text-gray-600 mt-4",children:"No contracts found."})})]})})},Dt=()=>e.jsx("div",{className:"pt-16",children:e.jsxs(Oe,{type:"single",collapsible:!0,children:[e.jsxs(U,{value:"item-1",children:[e.jsx(K,{children:"What is an Escrow Wallet?"}),e.jsx(z,{children:"An Escrow Wallet securely holds funds until the agreed project milestones are completed. This ensures both the freelancer and client are protected during the transaction process."})]}),e.jsxs(U,{value:"item-2",children:[e.jsx(K,{children:"How can I request a refund?"}),e.jsx(z,{children:"Refunds can be requested through the contract page by initiating a dispute. Once both parties agree or admin resolves the issue, the refund is processed from the escrow wallet."})]}),e.jsxs(U,{value:"item-3",children:[e.jsx(K,{children:"What happens if a freelancer quits midway through a project?"}),e.jsx(z,{children:"If a freelancer leaves a project midway, clients can raise a dispute. Funds in the escrow wallet remain secure and will be refunded or reassigned based on the outcome of the dispute resolution process. Please note that platform charges may still apply and will be deducted accordingly."})]})]})}),Et=()=>e.jsx("div",{className:"bg-yellow-50 dark:bg-gray-900 text-yellow-800 dark:text-yellow-300 py-2 px-4 rounded mb-4 text-xs font-semibold",children:e.jsx(xt,{pauseOnHover:!0,speed:50,gradient:!1,children:"Your contract is pending approval! The freelancer must accept it before you can proceed. Please wait for confirmation."})}),Ft=()=>e.jsx("div",{className:"bg-yellow-50 dark:bg-gray-900 text-yellow-800 dark:text-yellow-300 py-2 px-4 rounded mb-4 text-xs font-semibold",children:e.jsx("p",{className:"items-center text-center",children:"Your work status is pending, to get started please complete the transaction below"})}),It=({clientId:d,contractId:t,freelancerId:j,disabled:y,onSuccess:v})=>{const[b,m]=a.useState(!1),[u,o]=a.useState(0),[i,p]=a.useState(0),[c,g]=a.useState(""),D=async()=>{await Ve({clientId:d,contractId:t,freelancerId:j,rating:u,description:c}),P.success("Review submitted successfully"),v&&v(),m(!1),o(0),g("")};return e.jsxs(J,{open:b,onOpenChange:m,children:[e.jsx(H,{asChild:!0,children:e.jsx(k,{className:`mt-3 border ml-3 border-[#0077B6] text-[#0077B6] bg-transparent 
                    hover:bg-[#0077B611] hover:text-[#0077B6] 
                    dark:border-[#00FFE5] dark:text-[#ffff] dark:hover:bg-[#00FFE511] dark:hover:text-[#00FFE5]`,disabled:y,variant:"default",children:"Rate Freelancer"})}),e.jsxs(O,{className:"w-[90%] max-w-sm sm:max-w-md mx-auto rounded-lg",children:[e.jsx(V,{children:e.jsx(W,{children:"Leave a Review"})}),e.jsx("div",{className:"flex gap-1 justify-center mb-4",children:[...Array(5)].map((l,r)=>{const n=r+1;return e.jsx(X,{className:`w-6 h-6 cursor-pointer transition-colors ${n<=(i||u)?"text-yellow-400":"text-gray-400"}`,onMouseEnter:()=>p(n),onMouseLeave:()=>p(0),onClick:()=>o(n),fill:n<=u?"#facc15":"none"},r)})}),e.jsx(ue,{placeholder:"Write a review...",value:c,onChange:l=>g(l.target.value)}),e.jsx(Y,{className:"mt-4",children:e.jsx(k,{onClick:D,disabled:u===0||!c,children:"Submit"})})]})]})},Pt=()=>{const{id:d}=Z(),[t,j]=a.useState(null),[y,v]=a.useState(null),[b,m]=a.useState(!0),[u,o]=a.useState(""),[i,p]=a.useState(!1),[c,g]=a.useState(!1),[D,l]=a.useState(!1),[r,n]=a.useState(!1),[x,s]=a.useState(""),[f,h]=a.useState(""),[N,R]=a.useState(!1),[L,G]=a.useState(!1),le=We(),Ne=Ye();a.useEffect(()=>{(async()=>{if(!d){m(!1);return}try{const F=await lt(d);j(F.contract),v(F.contract.releaseFundStatus)}catch(F){console.error("ERROR:",F),o(F==null?void 0:F.message)}finally{m(!1)}})()},[d]);const ke=async()=>{p(!0);try{await Ue(t._id),g(!0),l(!1),P.success("Contract completed and funds released to the freelancer!")}catch(w){console.error("Fund release failed",w),P.error("Failed to release payment. Please try again.")}finally{p(!1)}},ve=async()=>{if(!(!(t!=null&&t._id)||!t.clientId._id||!x))try{R(!0),await ht(t._id,t.clientId._id,x,f),j(w=>w&&{...w,status:"Canceled"}),n(!1),P.success("Contract has been cancelled")}catch(w){console.error(w),P.error("Failed to cancel contract")}finally{R(!1)}};if(b)return e.jsx("div",{className:"flex justify-center items-center min-h-[calc(100vh-4rem)]",children:e.jsx(ee,{})});if(u)return e.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen text-center",children:[e.jsx($e,{className:"w-16 h-16 text-gray-400 dark:text-gray-600"}),e.jsx("p",{className:"mt-4 text-lg font-semibold text-gray-600 dark:text-gray-400",children:u})]});if(!t)return e.jsx("p",{className:"text-center mt-10",children:"Contract not found."});const we=async w=>{window.scrollTo({top:0,behavior:"smooth"}),m(!0);try{if(!le||!Ne||!d||!t)return;const F=await at.post(`/api/client/job/payment/${t.jobId._id}`,{title:t.jobId.title,rate:t.jobId.rate,freelancerId:w}),{id:Ce}=F.data,{error:ne}=await le.redirectToCheckout({sessionId:Ce});ne&&console.log("Error redirecting to checkout page",ne)}catch(F){console.log("Error redirecting to checkout page",F)}finally{m(!1)}};return e.jsxs("div",{className:"p-5 mt-16 max-w-6xl mx-auto",children:[!t.isApproved&&e.jsx(Et,{}),!t.escrowPaid&&t.isApproved&&e.jsx(Ft,{}),e.jsxs("div",{className:"rounded-lg p-6 bg-white dark:bg-gray-950",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center mb-6",children:"Skillora Contract"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start flex-col sm:flex-row gap-3 sm:items-center",children:[e.jsxs("p",{className:"text-base text-gray-800 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Contract ID:"})," ",t.contractId]}),e.jsxs("div",{children:[e.jsxs("p",{className:`text-base dark:text-gray-400 ${t.status==="Canceled"?"text-red-600 dark:text-red-500 font-semibold":"text-gray-800"}`,children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Status:"})," ",t.status]}),t.status==="Completed"&&t.releaseFundStatus!=="Approved"&&e.jsxs(J,{open:D,onOpenChange:l,children:[e.jsx(H,{asChild:!0,children:e.jsx(k,{disabled:c||y==="Requested",className:`group mt-4 text-sm px-5 py-2 rounded-full flex items-center gap-2 text-white transition-all duration-300 shadow-md ${c||y==="Requested"?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-indigo-600 dark:from-purple-500 dark:to-indigo-500 hover:from-purple-700 hover:to-indigo-700 dark:hover:from-purple-600 dark:hover:to-indigo-600"}`,children:c?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4"}),"Released"]}):y==="Requested"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4"}),"Fund Released"]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"w-4 h-4 transition-transform group-hover:scale-110"}),"Pay Freelancer"]})})}),!c&&e.jsxs(O,{className:"sm:max-w-md",children:[e.jsxs(V,{children:[e.jsx(W,{children:"Confirm Payment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you sure you want to release payment to the freelancer?"})]}),e.jsxs(Y,{children:[e.jsx(k,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsxs(k,{onClick:ke,disabled:i,className:"bg-green-600 hover:bg-green-700 text-white transition-all flex items-center gap-2",children:[i&&e.jsx(je,{className:"w-4 h-4 animate-spin"}),i?"Processing...":"Yes, Release"]})]})]})]}),(t==null?void 0:t.escrowPaid)&&t.releaseFundStatus==="NotRequested"&&t.status!=="Completed"&&e.jsxs(J,{open:r,onOpenChange:n,children:[e.jsx(H,{asChild:!0,children:e.jsx(k,{className:`border border-[#DC2626] text-[#DC2626] bg-transparent 
                                            hover:bg-[#DC262611] hover:text-[#DC2626] 
                                            dark:border-[#FF5252] dark:text-[#ffff] dark:hover:bg-[#FF525211] dark:hover:text-[#ffff] -ml-2 mt-2`,children:"Cancel Contract"})}),e.jsxs(O,{className:"sm:max-w-md",children:[e.jsxs(V,{children:[e.jsx(W,{children:"Confirm Cancellation"}),e.jsx(de,{children:"You are about to cancel a contract. If the contract has already started, only a partial refund will be processed."})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Reason"}),e.jsxs("select",{value:x,onChange:w=>s(w.target.value),className:"w-full mt-1 p-2 border rounded-md bg-background text-foreground",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a reason"}),e.jsx("option",{value:"Freelancer not responding",children:"Freelancer not responding"}),e.jsx("option",{value:"Project requirements changed",children:"Project requirements changed"}),e.jsx("option",{value:"Hired someone else",children:"Hired someone else"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{value:f,onChange:w=>h(w.target.value),placeholder:"Provide a brief reason for cancellation...",rows:4,className:"w-full mt-1 p-2 border rounded-md bg-background text-foreground"})]})]}),e.jsxs(Y,{className:"mt-4",children:[e.jsx(k,{variant:"outline",onClick:()=>n(!1),children:"Close"}),e.jsx(k,{disabled:N||!x,className:"bg-red-600 hover:bg-red-700 text-white transition-all",onClick:ve,children:N?"Processing...":"Confirm Cancel"})]})]})]}),t.status==="Completed"&&!L&&e.jsx(It,{clientId:t.clientId._id,contractId:t._id,freelancerId:t.freelancerId._id,onSuccess:()=>G(!0)})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold border-b pb-2",children:"Parties Involved"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-medium font-semibold dark:text-teal-500 text-cyan-700",children:"Freelancer"}),e.jsxs("p",{className:"text-base text-gray-800 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Name:"})," ",t.freelancerId.name]}),e.jsxs("p",{className:"text-base text-gray-800 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Email:"})," ",t.freelancerId.email]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-medium font-semibold dark:text-teal-500 text-cyan-700",children:"Client"}),e.jsxs("p",{className:"text-base text-gray-800 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Name:"})," ",t.clientId.name]}),e.jsxs("p",{className:"text-base text-gray-800 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Email:"})," ",t.clientId.email]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold border-b pb-2",children:"Job Details"}),e.jsxs("p",{className:"text-base text-gray-800 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Title:"})," ",t.jobId.title]}),e.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Description:"})," ",t.jobId.description]}),e.jsxs("p",{className:"text-base text-gray-800 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Rate:"})," ","₹",t.jobId.rate]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold border-b pb-2",children:"Additional Details"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-base text-gray-800 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Budget:"})," ","₹",t.amount]}),e.jsxs("p",{className:"text-base text-gray-800 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-950 dark:text-gray-200",children:"Created At:"})," ",ye(t.createdAt).format("DD MMM YYYY")]})]}),t.isApproved&&!t.escrowPaid&&e.jsx("div",{className:"flex gap-4 mt-4 md:mt-0",children:e.jsxs(J,{children:[e.jsx(H,{asChild:!0,children:e.jsxs(k,{className:`border border-[#0077B6] text-[#0077B6] bg-transparent 
                                                hover:bg-[#0076b60f] hover:text-[#0077B6] 
                                                dark:border-[#32a376] dark:text-[#ffffff] dark:hover:bg-[#25765626] dark:hover:text-[#48c391] 
                                                py-2 px-4 rounded transition duration-200`,children:[e.jsx(Q,{className:"w-5 h-5 mr-2"})," Pay Now"]})}),e.jsxs(O,{className:"max-w-[90%] sm:max-w-md mx-auto rounded",children:[e.jsx(V,{children:e.jsx(W,{children:"Confirm Payment"})}),e.jsx(de,{children:"Are you sure you want to proceed with the payment? This action will initiate the escrow process."}),e.jsxs(Y,{className:"flex justify-end gap-3",children:[e.jsx(oe,{asChild:!0,children:e.jsx(k,{variant:"outline",children:"Cancel"})}),e.jsx(oe,{asChild:!0,children:e.jsx(k,{onClick:()=>we(t.freelancerId._id),children:"Yes, Pay Now"})})]})]})]})})]}),!t.escrowPaid&&e.jsx(Dt,{})]}),t.escrowPaid&&t.status!=="Canceled"&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold border-b pb-2",children:"Work Progress"}),e.jsx(Ge,{workStatus:t.status,statusHistory:t.statusHistory})]})]})]})]})},Rt=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white dark:bg-gray-950 w-full px-4 text-center",children:[e.jsx(dt,{className:"w-16 h-16 text-green-500 mb-4 animate-bounce"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 animate-fade-in",children:"Payment Successful!"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400 max-w-md animate-fade-in",children:"Thank you for your payment. Your contract has been started."}),e.jsx(Se,{to:"/client/contracts",className:"mt-4 text-blue-500 hover:underline",children:"Click to view"})]}),Lt=()=>e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx(Rt,{})}),xe=Ke(void 0),Ht=()=>{const d=De(),j=["/client/messages"].includes(d.pathname);return e.jsxs("div",{children:[e.jsx(me,{}),e.jsxs(Ee,{children:[e.jsx(S,{path:"home",element:e.jsx(E,{requiredRole:"client",children:e.jsx(ft,{})})}),e.jsx(S,{path:"profile",element:e.jsx(E,{requiredRole:"client",children:e.jsx(kt,{})})}),e.jsx(S,{path:"post-job",element:e.jsx(E,{requiredRole:"client",children:e.jsx(vt,{})})}),e.jsx(S,{path:"job/view-job/:id",element:e.jsx(E,{requiredRole:"client",children:e.jsx(ce,{stripe:xe,children:e.jsx(ze,{})})})}),e.jsx(S,{path:"job/edit-job/:id",element:e.jsx(E,{requiredRole:"client",children:e.jsx(wt,{})})}),e.jsx(S,{path:"job/applied-freelancer/:freelancerId",element:e.jsx(E,{requiredRole:"client",children:e.jsx(Ct,{})})}),e.jsx(S,{path:"contracts",element:e.jsx(E,{requiredRole:"client",children:e.jsx(St,{})})}),e.jsx(S,{path:"contract/:id",element:e.jsx(E,{requiredRole:"client",children:e.jsx(ce,{stripe:xe,children:e.jsx(Pt,{})})})}),e.jsx(S,{path:"contract/payment-success",element:e.jsx(E,{requiredRole:"client",children:e.jsx(Lt,{})})}),e.jsx(S,{path:"profile-settings",element:e.jsx(E,{requiredRole:"client",children:e.jsx(Qe,{})})}),e.jsx(S,{path:"messages",element:e.jsx(E,{requiredRole:"client",children:e.jsx(Xe,{})})}),e.jsx(S,{path:"earnings",element:e.jsx(E,{requiredRole:"client",children:e.jsx(Ze,{})})}),e.jsx(S,{path:"*",element:e.jsx(nt,{})})]}),!j&&e.jsx(ot,{})]})};export{Ht as default};
